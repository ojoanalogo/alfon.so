---
import { Picture } from "astro:assets";
import dayjs from "dayjs";
import localizedFormat from "dayjs/plugin/localizedFormat";
import BaseLayout from "./BaseLayout.astro";

export interface Props {
  title: string;
  description: string;
  publishDate: Date;
  updatedDate?: string;
  heroImage?: any;
}

const { title, description, publishDate, updatedDate, heroImage } = Astro.props;

dayjs.extend(localizedFormat);
const displayDate = dayjs(publishDate).format("ll");
---

<BaseLayout
  title={title}
  description={description}
  image={heroImage}
  navbarActiveItemID="blog"
>
  <div class="mt-6">
    <div
      class="bg-white/50 dark:bg-black/10 backdrop-blur-lg border border-gray-300/40 dark:border-gray-600/40 rounded-lg p-4 sm:p-6 transition-all duration-300 hover:border-gray-400/50 dark:hover:border-gray-400/30 hover:shadow-sm dark:hover:shadow-md dark:hover:shadow-black/20"
    >
      <article class="prose prose-zinc dark:prose-invert max-w-none">
        {
          heroImage && (
            <Picture
              widths={[400, 800]}
              src={heroImage}
              alt={title}
              class="w-full mb-6 rounded-xl shadow-sm dark:shadow-md hover:shadow-md dark:hover:shadow-lg transition duration-300"
            />
          )
        }
        <h1 class="title mt-6 mb-4 text-4xl font-bold text-primary">{title}</h1>
        <p class="text-muted">{publishDate && <time>{displayDate}</time>}</p>
        {
          updatedDate && (
            <div>
              {" "}
              Ãšltima vez actualizado: <time>{updatedDate}</time>{" "}
            </div>
          )
        }
        <div class="divider mt-2"></div>
        <slot class="my-12" />
      </article>

      <div class="mt-3 pt-2 border-t border-gray-300 dark:border-gray-700 text-muted text-xs font-mono">
        <span class="text-secondary">$</span> cat {title.toLowerCase().replace(/\s+/g, '-')}.md
      </div>
    </div>
  </div>
</BaseLayout>
<style></style>
